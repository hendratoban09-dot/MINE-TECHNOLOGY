<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>MINE TECHNOLOGY - Highwall Safety Monitor</title>

  <style>
    body{
      font-family: Arial;
      background:#f4f7f6;
      margin:0;
      padding:20px;
    }

    /* ================= HEADER ================= */
    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      background:linear-gradient(90deg,#1b8f3a,#0a4f70,#f39c12);
      padding:12px 20px;
      border-radius:10px;
      color:white;
      margin-bottom:15px;
      box-shadow:0 6px 20px rgba(0,0,0,.25);
    }

    .header img{
      height:50px;
    }

    .header .title{
      text-align:center;
    }

    .header h2{
      margin:0;
      font-size:22px;
    }

    .header span{
      font-size:13px;
      opacity:.9;
    }

    /* ================= APP PANEL ================= */
    #app{
      display:none;
      background:#fff;
      padding:15px;
      border-radius:10px;
      box-shadow:0 6px 20px rgba(0,0,0,.15);
    }

    canvas{
      border:3px solid #0a4f70;
      cursor:crosshair;
      margin-top:10px;
      max-width:100%;
    }

    button{
      background:#1b8f3a;
      color:#fff;
      border:none;
      padding:8px 14px;
      border-radius:6px;
      cursor:pointer;
      font-weight:bold;
      margin-right:6px;
    }

    button:hover{
      background:#f39c12;
    }

    /* ================= LOGIN ================= */
    #loginBox{
      position:fixed;
      inset:0;
      background:rgba(0,0,0,0.65);
      display:flex;
      align-items:center;
      justify-content:center;
      z-index:9999;
    }

    #loginForm{
      background:#fff;
      padding:25px;
      width:320px;
      border-radius:10px;
      text-align:center;
      box-shadow:0 10px 30px rgba(0,0,0,.4);
    }

    #loginForm h3{
      margin-top:0;
      color:#1b8f3a;
    }

    #loginForm input{
      width:100%;
      padding:9px;
      margin-bottom:10px;
    }

    #loginForm button{
      width:100%;
    }

    #error{
      color:red;
      font-size:12px;
    }
  </style>
</head>

<body>

<!-- ================= LOGIN SCREEN ================= -->
<div id="loginBox">
  <div id="loginForm">
    <h3>MINE TECHNOLOGY</h3>
    <input type="text" id="user" placeholder="Username">
    <input type="password" id="pass" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="error"></p>
  </div>
</div>

<!-- ================= MAIN APP ================= -->
<div id="app">

  <!-- HEADER -->
  <div class="header">
    <img src="WhatsApp Image 2026-01-21 at 11.10.58.jpeg" alt="BUMA">
    <div class="title">
      <h2>MINE TECHNOLOGY</h2>
      <span>Highwall Safety Monitor</span>
    </div>
    <img src="WhatsApp Image 2026-01-21 at 11.12.06.jpeg" alt="Mine Tech">
  </div>

  <h3>Ukur Tinggi & Lebar (Referensi Meter)</h3>

  <input type="file" id="upload" accept="image/*"><br><br>

  <label>Referensi (meter): </label>
  <input type="number" id="refMeter" value="1" step="0.01">

  <select id="orientation">
    <option value="vertical">Vertikal</option>
    <option value="horizontal">Horizontal</option>
    <option value="free">Bebas</option>
  </select>

  <button onclick="setMode('kalibrasi')">Kalibrasi</button>
  <button onclick="setMode('ukur')">Ukur</button>
  <button onclick="resetAll()">Reset Semua</button>
  <button onclick="downloadPDF()">Download PDF</button>

  <br><br>

  <label>Inspektor:</label>
  <input type="text" id="inspector" value="Hendra Toban">

  <label>Front:</label>
  <input type="text" id="pit" placeholder="Front / Lokasi">

  <br><br>

  <canvas id="canvas"></canvas>
  <p id="info"></p>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
/* ================= LOGIN LOGIC (ASLI â€“ TIDAK DIUBAH) ================= */
const USERNAME = "MARKO";
const PASSWORD = "MARKO01";

function login(){
  const u = document.getElementById("user").value;
  const p = document.getElementById("pass").value;

  if(u === USERNAME && p === PASSWORD){
    document.getElementById("loginBox").style.display = "none";
    document.getElementById("app").style.display = "block";
  }else{
    document.getElementById("error").innerText = "Username atau password salah";
  }
}

/* ================= APLIKASI ASLI (TETAP) ================= */
const COMPANY = "PT. Bukit Makmur Mandiri Utama";
const SITE = "Lati Mine Operation";
const MIN = 4, MAX = 8;

const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
const upload = document.getElementById("upload");
const orient = document.getElementById("orientation");
const refMeter = document.getElementById("refMeter");
const info = document.getElementById("info");

let img = new Image();
let mode = "kalibrasi";
let pixelPerMeter = null;
let tempPoints = [];
let measurements = [];
let undoStack = [];
let dragPoint = null;
let referenceLine = null;
const R = 6;

/* ===== DI SINI ANDA TEMPEL SCRIPT CANVAS & PDF ASLI ANDA ===== */
/* (mouse event, draw, ukur, warna danger, export PDF, dll) */

</script>

</body>
</html>
